{"version":3,"file":"stock-finder.js","sourceRoot":"","sources":["../../../src/components/stock-finder/stock-finder.tsx"],"names":[],"mappings":"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","sourcesContent":["import { h, Component, State, Event, EventEmitter } from '@stencil/core/internal';\r\nimport { AV_API_KEY } from '../../global/global';\r\n\r\n@Component({\r\n  tag: 'uc-stock-finder',\r\n  styleUrl: './stock-finder.css',\r\n  shadow: true,\r\n})\r\nexport class StockFinder {\r\n  stockNameInput: HTMLInputElement;\r\n\r\n  @State() searchResults: { symbol: string; name: string }[] = [];\r\n  @State() loading = false;\r\n\r\n  @Event({ bubbles: true, composed: true }) ucSymbolSelected: EventEmitter<string>;\r\n\r\n  onfindStocks(event: Event) {\r\n    event.preventDefault();\r\n    this.loading = true;\r\n    const stockName = this.stockNameInput.value;\r\n    fetch(`https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=${stockName}&apikey=${AV_API_KEY}`)\r\n      .then(res => res.json())\r\n      .then(parsedResp => {\r\n        console.log('parsedResp', parsedResp);\r\n        parsedResp = {\r\n          bestMatches: [\r\n            {\r\n              '1. symbol': 'BA',\r\n              '2. name': 'Boeing Company',\r\n              '3. type': 'Equity',\r\n              '4. region': 'United States',\r\n              '5. marketOpen': '09:30',\r\n              '6. marketClose': '16:00',\r\n              '7. timezone': 'UTC-04',\r\n              '8. currency': 'USD',\r\n              '9. matchScore': '1.0000',\r\n            },\r\n            {\r\n              '1. symbol': 'BAB',\r\n              '2. name': 'INVESCO TAXABLE MUNICIPAL BOND ETF ',\r\n              '3. type': 'ETF',\r\n              '4. region': 'United States',\r\n              '5. marketOpen': '09:30',\r\n              '6. marketClose': '16:00',\r\n              '7. timezone': 'UTC-04',\r\n              '8. currency': 'USD',\r\n              '9. matchScore': '0.8000',\r\n            },\r\n            {\r\n              '1. symbol': 'BA.LON',\r\n              '2. name': 'BAE Systems plc',\r\n              '3. type': 'Equity',\r\n              '4. region': 'United Kingdom',\r\n              '5. marketOpen': '08:00',\r\n              '6. marketClose': '16:30',\r\n              '7. timezone': 'UTC+01',\r\n              '8. currency': 'GBX',\r\n              '9. matchScore': '0.6667',\r\n            },\r\n            {\r\n              '1. symbol': 'BABA',\r\n              '2. name': 'Alibaba Group Holding Ltd',\r\n              '3. type': 'Equity',\r\n              '4. region': 'United States',\r\n              '5. marketOpen': '09:30',\r\n              '6. marketClose': '16:00',\r\n              '7. timezone': 'UTC-04',\r\n              '8. currency': 'USD',\r\n              '9. matchScore': '0.6667',\r\n            },\r\n            {\r\n              '1. symbol': 'BA3.FRK',\r\n              '2. name': 'Brooks Automation Inc',\r\n              '3. type': 'Equity',\r\n              '4. region': 'Frankfurt',\r\n              '5. marketOpen': '08:00',\r\n              '6. marketClose': '20:00',\r\n              '7. timezone': 'UTC+02',\r\n              '8. currency': 'EUR',\r\n              '9. matchScore': '0.5714',\r\n            },\r\n            {\r\n              '1. symbol': 'BAAPX',\r\n              '2. name': 'BlackRock Aggressive GwthPrprdPtfInvstrA',\r\n              '3. type': 'Mutual Fund',\r\n              '4. region': 'United States',\r\n              '5. marketOpen': '09:30',\r\n              '6. marketClose': '16:00',\r\n              '7. timezone': 'UTC-04',\r\n              '8. currency': 'USD',\r\n              '9. matchScore': '0.5714',\r\n            },\r\n            {\r\n              '1. symbol': 'BAAAAX',\r\n              '2. name': 'Building America Strategy Port CDA USD Ser 21/1Q MNT CASH',\r\n              '3. type': 'Mutual Fund',\r\n              '4. region': 'United States',\r\n              '5. marketOpen': '09:30',\r\n              '6. marketClose': '16:00',\r\n              '7. timezone': 'UTC-04',\r\n              '8. currency': 'USD',\r\n              '9. matchScore': '0.5000',\r\n            },\r\n            {\r\n              '1. symbol': 'BAAAFX',\r\n              '2. name': 'Building America Strgy Portf CDA USD Ser 2022/2Q MNT CASH',\r\n              '3. type': 'Mutual Fund',\r\n              '4. region': 'United States',\r\n              '5. marketOpen': '09:30',\r\n              '6. marketClose': '16:00',\r\n              '7. timezone': 'UTC-04',\r\n              '8. currency': 'USD',\r\n              '9. matchScore': '0.5000',\r\n            },\r\n            {\r\n              '1. symbol': 'BAB3.LON',\r\n              '2. name': 'Leverage Shares 3x Alibaba ETP Securities',\r\n              '3. type': 'ETF',\r\n              '4. region': 'United Kingdom',\r\n              '5. marketOpen': '08:00',\r\n              '6. marketClose': '16:30',\r\n              '7. timezone': 'UTC+01',\r\n              '8. currency': 'USD',\r\n              '9. matchScore': '0.5000',\r\n            },\r\n            {\r\n              '1. symbol': 'BAAX39.SAO',\r\n              '2. name': 'Ishares Msci All Country Asia Ex Japan ETF',\r\n              '3. type': 'ETF',\r\n              '4. region': 'Brazil/Sao Paolo',\r\n              '5. marketOpen': '10:00',\r\n              '6. marketClose': '17:30',\r\n              '7. timezone': 'UTC-03',\r\n              '8. currency': 'BRL',\r\n              '9. matchScore': '0.3636',\r\n            },\r\n          ],\r\n        };\r\n\r\n        this.searchResults = parsedResp['bestMatches']?.map(match => {\r\n          return {\r\n            name: match['2. name'],\r\n            symbol: match['1. symbol'],\r\n          };\r\n        });\r\n        this.loading = false;\r\n      })\r\n      .catch(err => {\r\n        console.log('error:', err);\r\n        this.loading = false;\r\n      });\r\n  }\r\n\r\n  onSelectSymbol(symbol: string) {\r\n    this.ucSymbolSelected.emit(symbol);\r\n  }\r\n  render() {\r\n    let content = (\r\n      <ul>\r\n        {' '}\r\n        {this.searchResults.map(result => (\r\n          <li onClick={this.onSelectSymbol.bind(this, result.symbol)}>\r\n            <strong>{result.symbol}</strong> - {result.name}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n\r\n    if (this.loading) {\r\n      content = <uc-spinner></uc-spinner>;\r\n    }\r\n    return [\r\n      <form onSubmit={this.onfindStocks.bind(this)} key={'form'}>\r\n        {/* The ref below will give us direct access to the input */}\r\n        <input id=\"stock-symbol\" ref={el => (this.stockNameInput = el)} />\r\n        <button type=\"submit\">Find!</button>\r\n      </form>,\r\n       content ,\r\n    ];\r\n  }\r\n}\r\n"]}